# NOTE: This file is auto-generated and will be overwritten unless you set
#     AUTOGENERATE_COLLECTD_CONFIG="no"
# in /etc/sysconfig/stackdriver-agent

Hostname "{IID}" 

Interval 60

LoadPlugin write_http
LoadPlugin syslog

<Plugin "write_http">
  <URL "https://collectd-gateway.stackdriver.com/v1/agent?stackdriver-apikey={{API_KEY}}">
    Format "JSON"
    StoreRates true
  </URL>
</Plugin>

LoadPlugin df
<Plugin "df">
  FSType "devfs"
  IgnoreSelected true
  ReportByDevice true
  ReportReserved true
</Plugin>

LoadPlugin cpu
LoadPlugin swap
LoadPlugin interface
LoadPlugin disk
LoadPlugin load
LoadPlugin memory
LoadPlugin processes

<Plugin "disk">
  # No config - collectd fails parsing configuration if tag is empty.
</Plugin>

#LoadPlugin logfile
#<Plugin "logfile">
#  LogLevel "info"
#  File "/var/log/collectd.log"
#  Timestamp true
#</Plugin>

LoadPlugin aggregation
<Plugin "aggregation">
    <Aggregation>
       Plugin "cpu"
       Type "cpu"

       GroupBy "Host"
       GroupBy "TypeInstance"

       CalculateAverage true
    </Aggregation>
</Plugin>

# if you have other config, especially for plugins, you can drop them
# into this directory
Include "/opt/stackdriver/collectd/etc/collectd.d"
